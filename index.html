<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Golf Speed Training</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary: #FF6B35;
            --primary-dark: #E5532F;
            --secondary: #004E89;
            --success: #2DD881;
            --bg: #0A0E27;
            --card-bg: #151A33;
            --text: #FFFFFF;
            --text-secondary: #8F9BB3;
            --border: #222B45;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            padding-bottom: 80px;
        }

        .header {
            background: linear-gradient(135deg, var(--secondary), #003366);
            padding: 20px 20px 30px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.8;
        }

        .week-progress {
            padding: 20px;
            background: var(--card-bg);
            margin: -15px 15px 15px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .week-label {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .week-selector {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 5px;
            -webkit-overflow-scrolling: touch;
        }

        .week-selector::-webkit-scrollbar {
            display: none;
        }

        .week-btn {
            min-width: 50px;
            height: 50px;
            border-radius: 12px;
            background: var(--bg);
            border: 2px solid var(--border);
            color: var(--text-secondary);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .week-btn span {
            font-size: 10px;
            margin-top: 2px;
        }

        .week-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
            transform: scale(1.05);
        }

        .week-btn.completed {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding: 0 15px 20px;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 16px;
            border: 1px solid var(--border);
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-unit {
            font-size: 14px;
            color: var(--text-secondary);
            margin-left: 4px;
        }

        .day-tabs {
            display: flex;
            gap: 8px;
            padding: 0 15px 20px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .day-tabs::-webkit-scrollbar {
            display: none;
        }

        .day-tab {
            min-width: 80px;
            padding: 12px 16px;
            background: var(--card-bg);
            border: 2px solid var(--border);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .day-tab.active {
            background: var(--primary);
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4);
        }

        .day-label {
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 4px;
            text-transform: uppercase;
        }

        .day-tab.active .day-label {
            color: white;
        }

        .day-name {
            font-size: 15px;
            font-weight: 600;
        }

        .workout-section {
            padding: 0 15px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
        }

        .workout-time {
            font-size: 13px;
            color: var(--text-secondary);
            background: var(--card-bg);
            padding: 6px 12px;
            border-radius: 8px;
        }

        .add-exercise-btn {
            width: 100%;
            padding: 16px;
            background: var(--card-bg);
            border: 2px dashed var(--border);
            border-radius: 12px;
            color: var(--text-secondary);
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 15px;
        }

        .add-exercise-btn:active {
            transform: scale(0.98);
            border-color: var(--primary);
            color: var(--primary);
        }

        .exercise-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 12px;
            border: 1px solid var(--border);
            transition: all 0.3s;
            position: relative;
        }

        .exercise-card.completed {
            opacity: 0.5;
            border-color: var(--success);
        }

        .remove-exercise {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 28px;
            height: 28px;
            background: rgba(255, 107, 53, 0.2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--primary);
            font-size: 18px;
            font-weight: bold;
        }

        .exercise-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .exercise-number {
            width: 32px;
            height: 32px;
            background: var(--primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            flex-shrink: 0;
        }

        .exercise-info {
            flex: 1;
            margin: 0 15px;
        }

        .exercise-name {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .exercise-sets {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .expand-btn {
            width: 32px;
            height: 32px;
            background: var(--bg);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .expand-btn:active {
            transform: scale(0.95);
        }

        .exercise-details {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border);
            animation: slideDown 0.3s;
        }

        .exercise-details.show {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .steps-list {
            margin: 15px 0;
        }

        .step {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
            font-size: 14px;
            line-height: 1.5;
        }

        .step-num {
            width: 24px;
            height: 24px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .cues-box {
            background: rgba(255, 107, 53, 0.1);
            border-left: 3px solid var(--primary);
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .cues-title {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary);
        }

        .cues-list {
            font-size: 13px;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .action-btns {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn {
            flex: 1;
            padding: 14px;
            border-radius: 12px;
            border: none;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .btn:active {
            transform: scale(0.97);
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-secondary {
            background: var(--bg);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .timer-section {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 15px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .timer-title {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .timer-display {
            font-size: 56px;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .timer-btns {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .timer-btn {
            padding: 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .timer-btn:active {
            transform: scale(0.95);
        }

        .timer-btn.stop {
            background: var(--primary);
            color: white;
        }

        .progress-section {
            padding: 20px 15px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-label {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            display: block;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .input-field {
            width: 100%;
            padding: 16px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-size: 16px;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border-top: 1px solid var(--border);
            display: flex;
            padding: 8px 0;
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-secondary);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .nav-label {
            font-size: 11px;
            font-weight: 500;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            overflow-y: auto;
            animation: fadeIn 0.3s;
        }

        .modal.show {
            display: block;
        }

        .modal-content {
            background: var(--card-bg);
            margin: 20px;
            border-radius: 20px;
            padding: 20px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
        }

        .close-modal {
            width: 32px;
            height: 32px;
            background: var(--bg);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
        }

        .exercise-category {
            margin-bottom: 25px;
        }

        .category-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--primary);
        }

        .exercise-library-item {
            background: var(--bg);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid var(--border);
        }

        .exercise-library-item:active {
            transform: scale(0.98);
            border-color: var(--primary);
        }

        .library-item-name {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .library-item-desc {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .history-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            border: 1px solid var(--border);
        }

        .history-date {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .history-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .history-stat {
            display: flex;
            flex-direction: column;
        }

        .history-stat-label {
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .history-stat-value {
            font-size: 18px;
            font-weight: 600;
        }

        .gain {
            color: var(--success);
            font-size: 12px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .empty-text {
            font-size: 16px;
            color: var(--text-secondary);
        }

        @keyframes slideIn {
            from {
                transform: translateY(-100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateY(0);
                opacity: 1;
            }
            to {
                transform: translateY(-100px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>‚õ≥ Golf Speed</h1>
        <p>Custom Workout Builder</p>
    </div>

    <!-- Week Progress -->
    <div class="week-progress">
        <div class="week-label">Program Week</div>
        <div class="week-selector" id="weekSelector"></div>
    </div>

    <!-- Stats -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-label">Speed Gain</div>
            <div>
                <span class="stat-value" id="speedGain">0</span>
                <span class="stat-unit">mph</span>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Workouts Done</div>
            <div>
                <span class="stat-value" id="workoutsThisWeek">0</span>
                <span class="stat-unit">this week</span>
            </div>
        </div>
    </div>

    <!-- Workout Tab -->
    <div id="workoutTab" class="tab-content active">
        <!-- Day Tabs -->
        <div class="day-tabs">
            <div class="day-tab active" onclick="loadDay(1)">
                <div class="day-label">LEG DAY</div>
                <div class="day-name">Monday</div>
            </div>
            <div class="day-tab" onclick="loadDay(5)">
                <div class="day-label">LEG DAY</div>
                <div class="day-name">Friday</div>
            </div>
            <div class="day-tab" onclick="loadDay(6)">
                <div class="day-label">UPPER</div>
                <div class="day-name">Saturday</div>
            </div>
            <div class="day-tab" onclick="loadDay(0)">
                <div class="day-label">UPPER</div>
                <div class="day-name">Sunday</div>
            </div>
        </div>

        <!-- Workout Section -->
        <div class="workout-section">
            <div class="section-header">
                <h2 class="section-title" id="workoutTitle">Monday Legs</h2>
                <span class="workout-time" id="workoutTime">50 min</span>
            </div>
            
            <button class="add-exercise-btn" onclick="openLibrary()">
                + Add Exercise
            </button>
            
            <div id="exercisesList"></div>
        </div>

        <!-- Timer -->
        <div class="timer-section">
            <div class="timer-title">‚è±Ô∏è Rest Timer</div>
            <div class="timer-display" id="timerDisplay">0:00</div>
            <div class="timer-btns">
                <button class="timer-btn" onclick="startTimer(90)">90s</button>
                <button class="timer-btn" onclick="startTimer(120)">2m</button>
                <button class="timer-btn" onclick="startTimer(180)">3m</button>
                <button class="timer-btn stop" onclick="stopTimer()">Stop</button>
            </div>
        </div>
    </div>

    <!-- Progress Tab -->
    <div id="progressTab" class="tab-content">
        <div class="progress-section">
            <h2 class="section-title" style="margin-bottom: 20px;">Track Progress</h2>
            
            <div class="input-group">
                <label class="input-label">Clubhead Speed (mph)</label>
                <input type="number" class="input-field" id="speedInput" placeholder="105">
            </div>

            <div class="input-group">
                <label class="input-label">Carry Distance (yards)</label>
                <input type="number" class="input-field" id="distanceInput" placeholder="250">
            </div>

            <div class="input-group">
                <label class="input-label">Trap Bar Deadlift (lbs)</label>
                <input type="number" class="input-field" id="deadliftInput" placeholder="225">
            </div>

            <button class="btn btn-primary" onclick="saveProgress()" style="width: 100%; margin-bottom: 30px;">
                üíæ Save Progress
            </button>

            <h3 class="section-title" style="margin-bottom: 15px;">History</h3>
            <div id="historyList"></div>
        </div>
    </div>

    <!-- Exercise Library Modal -->
    <div class="modal" id="libraryModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Exercise Library</div>
                <div class="close-modal" onclick="closeLibrary()">√ó</div>
            </div>
            <div id="libraryContent"></div>
        </div>
    </div>

    <!-- Bottom Nav -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('workout')">
            <div class="nav-icon">üí™</div>
            <div class="nav-label">Workout</div>
        </div>
        <div class="nav-item" onclick="switchTab('progress')">
            <div class="nav-icon">üìà</div>
            <div class="nav-label">Progress</div>
        </div>
    </div>

    <script>
        // COMPLETE EXERCISE LIBRARY - 40+ Exercises
        const exerciseLibrary = {
            // LEGS & PLYOMETRICS
            legs: {
                trapBar: {
                    name: "Trap Bar Deadlift",
                    category: "Legs",
                    sets: "5√ó5 @ 75%",
                    rest: "2-3 min",
                    steps: [
                        "Stand inside trap bar, feet hip-width apart",
                        "Grip handles, chest up, shoulders back",
                        "Brace core, take deep breath",
                        "PUSH through floor like jumping - EXPLODE up",
                        "Drive with legs, not arms",
                        "Stand tall, squeeze glutes at top",
                        "Lower with control - hips back first"
                    ],
                    cues: "Push THROUGH floor ‚Ä¢ Chest up ‚Ä¢ Weight mid-foot ‚Ä¢ Explosive up"
                },
                singleLegRDL: {
                    name: "Single-Leg RDL",
                    category: "Legs",
                    sets: "Lead: 5√ó8 | Trail: 4√ó8",
                    rest: "90 sec",
                    steps: [
                        "Stand on one leg (lead leg)",
                        "Hold dumbbell in opposite hand",
                        "Hinge at HIP - push hips back",
                        "Free leg extends behind you",
                        "Lower until hamstring stretch",
                        "Squeeze glute to return up",
                        "Keep hips square - don't rotate"
                    ],
                    cues: "Hinge at hip ‚Ä¢ Back stays flat ‚Ä¢ Balance ‚Ä¢ Lead leg extra set"
                },
                boxJumps: {
                    name: "Box Jumps",
                    category: "Plyometric",
                    sets: "3√ó5",
                    rest: "2 min",
                    steps: [
                        "Stand 6-12 inches from box",
                        "Swing arms back, slight knee bend",
                        "Explosively swing arms forward and jump",
                        "Land softly on entire foot",
                        "Stand fully upright on box",
                        "STEP down one foot at a time",
                        "Never jump down - protects knees"
                    ],
                    cues: "Soft landing ‚Ä¢ STEP down ‚Ä¢ Quiet = good"
                },
                bulgarianSplit: {
                    name: "Bulgarian Split Squat",
                    category: "Legs",
                    sets: "4√ó8 each leg",
                    rest: "90 sec",
                    steps: [
                        "Back foot elevated on bench (12-18 inches)",
                        "Front foot 2-3 feet forward",
                        "Hold dumbbells at sides",
                        "Lower down until front thigh parallel",
                        "Keep front knee over ankle",
                        "Push through front heel to stand",
                        "Do all reps one leg, then switch"
                    ],
                    cues: "Upright torso ‚Ä¢ Front knee stable ‚Ä¢ Deep stretch in back leg"
                },
                gobletSquat: {
                    name: "Goblet Squat",
                    category: "Legs",
                    sets: "4√ó10",
                    rest: "90 sec",
                    steps: [
                        "Hold dumbbell or kettlebell at chest",
                        "Feet shoulder-width, toes slightly out",
                        "Brace core, chest up",
                        "Sit back and down between legs",
                        "Elbows push knees out at bottom",
                        "Go deep - below parallel if possible",
                        "Drive through heels to stand"
                    ],
                    cues: "Chest up ‚Ä¢ Knees out ‚Ä¢ Deep squat ‚Ä¢ Heels down"
                },
                walkingLunges: {
                    name: "Walking Lunges",
                    category: "Legs",
                    sets: "3√ó10 each leg",
                    rest: "60 sec",
                    steps: [
                        "Stand with dumbbells at sides",
                        "Step forward into deep lunge",
                        "Back knee almost touches ground",
                        "Front knee stays over ankle",
                        "Push through front heel to stand",
                        "Bring back foot forward into next lunge",
                        "Continue walking forward"
                    ],
                    cues: "Long steps ‚Ä¢ Back knee down ‚Ä¢ Upright torso ‚Ä¢ Controlled"
                },
                stepUps: {
                    name: "Step-Ups",
                    category: "Legs",
                    sets: "4√ó10 each leg",
                    rest: "75 sec",
                    steps: [
                        "Use 16-20 inch box or bench",
                        "Hold dumbbells at sides",
                        "Place entire right foot on box",
                        "Push through right heel to step up",
                        "Stand fully on box",
                        "Step down with control",
                        "Do all reps one leg, then switch"
                    ],
                    cues: "Drive through heel ‚Ä¢ Full extension ‚Ä¢ Control descent"
                },
                kettlebellSwing: {
                    name: "Kettlebell Swings",
                    category: "Plyometric",
                    sets: "4√ó15",
                    rest: "90 sec",
                    steps: [
                        "Feet shoulder-width, kettlebell on ground",
                        "Hinge at hips, grab bell with both hands",
                        "Hike bell between legs behind you",
                        "EXPLOSIVELY thrust hips forward",
                        "Bell floats to shoulder height",
                        "Let it swing back down between legs",
                        "Immediately thrust hips again"
                    ],
                    cues: "Hip hinge ‚Ä¢ Explosive thrust ‚Ä¢ Arms relaxed ‚Ä¢ Power from hips"
                },
                broadJumps: {
                    name: "Broad Jumps",
                    category: "Plyometric",
                    sets: "3√ó5",
                    rest: "2 min",
                    steps: [
                        "Stand with feet shoulder-width",
                        "Swing arms back, quarter squat down",
                        "Explosively swing arms forward and jump",
                        "Jump as FAR forward as possible",
                        "Land with soft knees, absorb impact",
                        "Walk back to start",
                        "Reset and repeat"
                    ],
                    cues: "Jump for distance ‚Ä¢ Soft landing ‚Ä¢ Maximum effort"
                },
                lateralBounds: {
                    name: "Lateral Bounds",
                    category: "Plyometric",
                    sets: "3√ó6 each side",
                    rest: "90 sec",
                    steps: [
                        "Stand on right leg only",
                        "Push off explosively to the LEFT",
                        "Jump laterally as far as possible",
                        "Land on left leg only, stick it",
                        "Pause 1 second for balance",
                        "Push off left, jump back to right",
                        "Continue alternating"
                    ],
                    cues: "Single leg landing ‚Ä¢ Stick it ‚Ä¢ Explosive push ‚Ä¢ Balance"
                }
            },
            
            // CORE & STABILITY
            core: {
                pallof: {
                    name: "Pallof Press",
                    category: "Core",
                    sets: "3√ó10 each side",
                    rest: "60 sec",
                    steps: [
                        "Band at chest height, stand sideways",
                        "Hold band at chest with both hands",
                        "Brace core HARD",
                        "Press hands straight out in front",
                        "RESIST rotation - band tries to pull you",
                        "Hold 2 seconds extended",
                        "Return to chest with control"
                    ],
                    cues: "Core tight ‚Ä¢ Resist rotation ‚Ä¢ Press straight ‚Ä¢ Hold 2 sec"
                },
                medBall: {
                    name: "Medicine Ball Slams",
                    category: "Core",
                    sets: "3√ó6 each side",
                    rest: "90 sec",
                    steps: [
                        "Stand with ball at chest",
                        "Rotate right, loading up",
                        "EXPLOSIVELY rotate and SLAM ball down",
                        "Use full body, not just arms",
                        "Catch on bounce",
                        "Immediately rotate opposite and slam",
                        "Be AGGRESSIVE - this is violent"
                    ],
                    cues: "Full body ‚Ä¢ Maximum effort ‚Ä¢ Exhale hard on slam"
                },
                mcgillCurlUp: {
                    name: "Modified Curl-Up",
                    category: "Core",
                    sets: "3√ó8 (10 sec holds)",
                    rest: "30 sec",
                    steps: [
                        "Lie on back, one leg straight, one bent",
                        "Hands UNDER lower back (preserve arch)",
                        "Brace core hard",
                        "Lift head/shoulders 1-2 inches ONLY",
                        "Hold 10 seconds",
                        "Lower with control"
                    ],
                    cues: "Hands under back ‚Ä¢ Only 1-2 inches ‚Ä¢ 10 sec hold"
                },
                sidePlank: {
                    name: "Side Plank",
                    category: "Core",
                    sets: "Lead: 3√ó45s | Trail: 2√ó30s",
                    rest: "30 sec",
                    steps: [
                        "Lie on side, elbow under shoulder",
                        "Bottom knee down (modified for age 54)",
                        "Lift hips creating straight line",
                        "Keep hips stacked vertically",
                        "Hold 45 seconds on LEAD side",
                        "30 seconds on trail side"
                    ],
                    cues: "Hips stacked ‚Ä¢ Don't sag ‚Ä¢ Breathe normally ‚Ä¢ Lead side more"
                },
                birdDog: {
                    name: "Bird Dog",
                    category: "Core",
                    sets: "3√ó8 each side (10 sec)",
                    rest: "30 sec",
                    steps: [
                        "Hands and knees position",
                        "Extend RIGHT arm forward",
                        "Extend LEFT leg back (opposite!)",
                        "Keep hips LEVEL - imagine cup of water on back",
                        "Hold 10 seconds",
                        "Switch: left arm, right leg"
                    ],
                    cues: "Opposite arm/leg ‚Ä¢ Hips level ‚Ä¢ No rotation ‚Ä¢ 10 sec hold"
                },
                plank: {
                    name: "Front Plank",
                    category: "Core",
                    sets: "3√ó45-60 sec",
                    rest: "60 sec",
                    steps: [
                        "Forearms on ground, elbows under shoulders",
                        "Extend legs, on toes",
                        "Body in straight line from head to heels",
                        "Brace core HARD",
                        "Don't let hips sag or pike up",
                        "Hold time - breathe normally"
                    ],
                    cues: "Straight line ‚Ä¢ Core tight ‚Ä¢ No sag ‚Ä¢ Breathe"
                }
            },
            
            // ARMS
            arms: {
                pullUps: {
                    name: "Pull-Ups",
                    category: "Arms/Back",
                    sets: "4√ó6-10",
                    rest: "2 min",
                    steps: [
                        "Hang from bar, hands shoulder-width",
                        "Palms facing away (overhand grip)",
                        "Engage lats, pull shoulder blades down",
                        "Pull yourself up until chin over bar",
                        "Lead with chest, not chin",
                        "Lower with control to full extension",
                        "Use band for assistance if needed"
                    ],
                    cues: "Full range ‚Ä¢ Chest to bar ‚Ä¢ Control down ‚Ä¢ Lats engaged"
                },
                chinUps: {
                    name: "Chin-Ups",
                    category: "Arms/Back",
                    sets: "4√ó6-10",
                    rest: "2 min",
                    steps: [
                        "Hang from bar, hands shoulder-width",
                        "Palms facing you (underhand grip)",
                        "Pull yourself up, chin over bar",
                        "Biceps do more work than pull-ups",
                        "Lower with control",
                        "Full extension at bottom"
                    ],
                    cues: "Palms in ‚Ä¢ Full range ‚Ä¢ Squeeze biceps ‚Ä¢ Control"
                },
                dumbbellCurls: {
                    name: "Dumbbell Bicep Curls",
                    category: "Arms",
                    sets: "3√ó10-12",
                    rest: "60 sec",
                    steps: [
                        "Stand with dumbbells at sides",
                        "Elbows tight to ribs",
                        "Curl weights up, rotate palms up",
                        "Squeeze biceps at top",
                        "Lower with control - 2 second descent",
                        "Don't swing or use momentum",
                        "Keep elbows stationary"
                    ],
                    cues: "Elbows still ‚Ä¢ No swing ‚Ä¢ Squeeze ‚Ä¢ Control down"
                },
                hammerCurls: {
                    name: "Hammer Curls",
                    category: "Arms",
                    sets: "3√ó10-12",
                    rest: "60 sec",
                    steps: [
                        "Dumbbells at sides, palms facing each other",
                        "Keep palms facing (neutral grip)",
                        "Curl weights up",
                        "Squeeze at top",
                        "Lower with control",
                        "Targets brachialis and forearms"
                    ],
                    cues: "Neutral grip ‚Ä¢ Elbows still ‚Ä¢ Forearms engaged"
                },
                tricepDips: {
                    name: "Tricep Dips",
                    category: "Arms",
                    sets: "3√ó10-15",
                    rest: "75 sec",
                    steps: [
                        "Hands on bench or parallel bars",
                        "Lower body by bending elbows",
                        "Go down until elbows at 90 degrees",
                        "Press back up through hands",
                        "Keep body close to bench",
                        "Lean forward slightly for more triceps"
                    ],
                    cues: "90¬∞ elbows ‚Ä¢ Close to bench ‚Ä¢ Press hard ‚Ä¢ Full extension"
                },
                overheadExtension: {
                    name: "Overhead Tricep Extension",
                    category: "Arms",
                    sets: "3√ó12",
                    rest: "60 sec",
                    steps: [
                        "Hold one dumbbell with both hands overhead",
                        "Lower weight behind head",
                        "Keep elbows pointing up (don't flare out)",
                        "Extend arms to press weight back up",
                        "Only forearms move - upper arms still",
                        "Full stretch at bottom, squeeze at top"
                    ],
                    cues: "Elbows up ‚Ä¢ Full stretch ‚Ä¢ Squeeze triceps ‚Ä¢ Control"
                },
                cableRope: {
                    name: "Cable Rope Pushdown",
                    category: "Arms",
                    sets: "3√ó12-15",
                    rest: "60 sec",
                    steps: [
                        "Attach rope to high cable pulley",
                        "Grab rope, elbows at sides",
                        "Push rope down, split ends at bottom",
                        "Squeeze triceps hard",
                        "Let cable pull hands back up with control",
                        "Keep elbows stationary"
                    ],
                    cues: "Split rope ‚Ä¢ Elbows still ‚Ä¢ Full extension ‚Ä¢ Squeeze"
                }
            },
            
            // SHOULDERS
            shoulders: {
                overheadPress: {
                    name: "Overhead Press",
                    category: "Shoulders",
                    sets: "4√ó8",
                    rest: "2 min",
                    steps: [
                        "Barbell or dumbbells at shoulder height",
                        "Feet shoulder-width, core braced",
                        "Press weight straight overhead",
                        "Lock out arms at top",
                        "Lower with control to shoulders",
                        "Don't arch back excessively"
                    ],
                    cues: "Straight up ‚Ä¢ Lockout ‚Ä¢ Core tight ‚Ä¢ Control down"
                },
                lateralRaise: {
                    name: "Lateral Raises",
                    category: "Shoulders",
                    sets: "3√ó12-15",
                    rest: "60 sec",
                    steps: [
                        "Dumbbells at sides, slight elbow bend",
                        "Raise arms out to sides",
                        "Lead with elbows, not hands",
                        "Raise to shoulder height",
                        "Pause at top",
                        "Lower with control",
                        "Keep slight forward lean"
                    ],
                    cues: "Lead with elbows ‚Ä¢ Shoulder height ‚Ä¢ Control ‚Ä¢ Light weight"
                },
                frontRaise: {
                    name: "Front Raises",
                    category: "Shoulders",
                    sets: "3√ó12",
                    rest: "60 sec",
                    steps: [
                        "Dumbbells in front of thighs",
                        "Raise weights straight forward",
                        "Arms nearly straight (slight bend)",
                        "Raise to shoulder height",
                        "Lower with control",
                        "Alternate arms or both together"
                    ],
                    cues: "Straight forward ‚Ä¢ Shoulder height ‚Ä¢ Control ‚Ä¢ No swing"
                },
                facePulls: {
                    name: "Face Pulls",
                    category: "Shoulders",
                    sets: "3√ó15-20",
                    rest: "60 sec",
                    steps: [
                        "Rope/handles at face height",
                        "Stand with slight forward lean",
                        "Pull to FACE level (not chest)",
                        "Elbows HIGH and out to sides",
                        "Squeeze shoulder blades hard",
                        "Hold 1 second",
                        "Control return to start"
                    ],
                    cues: "Light weight ‚Ä¢ High elbows ‚Ä¢ Squeeze shoulder blades"
                },
                arnoldPress: {
                    name: "Arnold Press",
                    category: "Shoulders",
                    sets: "3√ó10",
                    rest: "90 sec",
                    steps: [
                        "Start dumbbells at shoulders, palms facing you",
                        "Press up while rotating palms forward",
                        "End with palms facing forward, arms extended",
                        "Reverse the motion on the way down",
                        "Rotate palms back to facing you",
                        "Great for all three deltoid heads"
                    ],
                    cues: "Rotate as you press ‚Ä¢ Full rotation ‚Ä¢ Control ‚Ä¢ Smooth"
                },
                rearDelt: {
                    name: "Rear Delt Flyes",
                    category: "Shoulders",
                    sets: "3√ó12-15",
                    rest: "60 sec",
                    steps: [
                        "Bend forward at hips, torso parallel to ground",
                        "Dumbbells hanging down",
                        "Raise arms out to sides",
                        "Lead with elbows, squeeze shoulder blades",
                        "Raise to torso height",
                        "Lower with control"
                    ],
                    cues: "Torso parallel ‚Ä¢ Lead with elbows ‚Ä¢ Squeeze ‚Ä¢ Light weight"
                }
            },
            
            // CHEST
            chest: {
                benchPress: {
                    name: "Barbell Bench Press",
                    category: "Chest",
                    sets: "4√ó8",
                    rest: "2-3 min",
                    steps: [
                        "Lie on bench, feet flat on floor",
                        "Grip bar slightly wider than shoulders",
                        "Unrack, bar over chest",
                        "Lower to chest with control",
                        "Touch chest (don't bounce)",
                        "Press bar back up powerfully",
                        "Lock out at top"
                    ],
                    cues: "Feet down ‚Ä¢ Arch back ‚Ä¢ Touch chest ‚Ä¢ Drive up"
                },
                pushUps: {
                    name: "Push-Ups",
                    category: "Chest",
                    sets: "3√ó15-20",
                    rest: "60 sec",
                    steps: [
                        "Hands shoulder-width on ground",
                        "Body in straight line",
                        "Lower chest to ground",
                        "Elbows at 45 degrees",
                        "Push back up to full extension",
                        "Keep core tight throughout",
                        "Modify on knees if needed"
                    ],
                    cues: "Straight body ‚Ä¢ Chest to ground ‚Ä¢ Full extension ‚Ä¢ Core tight"
                },
                dumbbellFlyes: {
                    name: "Dumbbell Flyes",
                    category: "Chest",
                    sets: "3√ó12",
                    rest: "75 sec",
                    steps: [
                        "Lie on bench, dumbbells pressed up",
                        "Slight bend in elbows",
                        "Lower weights out to sides in arc",
                        "Feel stretch in chest",
                        "Bring weights back together at top",
                        "Squeeze chest hard",
                        "Control throughout - don't drop weights"
                    ],
                    cues: "Arc motion ‚Ä¢ Stretch chest ‚Ä¢ Squeeze ‚Ä¢ Control"
                },
                inclinePress: {
                    name: "Incline Press",
                    category: "Chest",
                    sets: "4√ó10",
                    rest: "2 min",
                    steps: [
                        "Bench at 30-45 degree incline",
                        "Dumbbells or barbell at shoulder height",
                        "Press straight up (perpendicular to floor)",
                        "Don't let weights drift forward",
                        "Lower with control to chest",
                        "Targets upper chest"
                    ],
                    cues: "30-45¬∞ angle ‚Ä¢ Press straight ‚Ä¢ Upper chest focus"
                },
                cableCross: {
                    name: "Cable Crossovers",
                    category: "Chest",
                    sets: "3√ó15",
                    rest: "60 sec",
                    steps: [
                        "Cables set high, handles in each hand",
                        "Step forward, slight bend forward",
                        "Arms extended out to sides",
                        "Bring hands together in front of chest",
                        "Squeeze chest hard",
                        "Return to stretched position with control"
                    ],
                    cues: "Arc motion ‚Ä¢ Squeeze ‚Ä¢ Stretch ‚Ä¢ Constant tension"
                },
                declinePress: {
                    name: "Decline Press",
                    category: "Chest",
                    sets: "4√ó10",
                    rest: "2 min",
                    steps: [
                        "Bench at decline (feet elevated)",
                        "Barbell or dumbbells at chest",
                        "Press straight up",
                        "Lower to lower chest",
                        "Targets lower chest",
                        "Secure feet properly"
                    ],
                    cues: "Decline angle ‚Ä¢ Lower chest ‚Ä¢ Press straight ‚Ä¢ Secure feet"
                }
            },
            
            // BACK
            back: {
                deadlift: {
                    name: "Conventional Deadlift",
                    category: "Back",
                    sets: "5√ó5",
                    rest: "3 min",
                    steps: [
                        "Bar over mid-foot",
                        "Grip just outside legs",
                        "Chest up, shoulders back",
                        "Push through floor to stand",
                        "Hips and shoulders rise together",
                        "Stand fully tall",
                        "Lower with control - hips back first"
                    ],
                    cues: "Chest up ‚Ä¢ Push floor ‚Ä¢ Hips/shoulders together ‚Ä¢ Control"
                },
                bentOverRow: {
                    name: "Bent-Over Barbell Row",
                    category: "Back",
                    sets: "4√ó8",
                    rest: "90 sec",
                    steps: [
                        "Barbell in hands, hinge at hips",
                        "Torso nearly parallel to ground",
                        "Pull bar to lower chest/upper abs",
                        "Lead with elbows",
                        "Squeeze shoulder blades together",
                        "Lower with control",
                        "Keep core braced"
                    ],
                    cues: "Parallel torso ‚Ä¢ Pull to chest ‚Ä¢ Squeeze ‚Ä¢ Elbows back"
                },
                dumbbellRow: {
                    name: "Single-Arm Dumbbell Row",
                    category: "Back",
                    sets: "4√ó10 each",
                    rest: "60 sec",
                    steps: [
                        "One hand and knee on bench",
                        "Dumbbell in other hand hanging down",
                        "Pull weight to hip",
                        "Lead with elbow",
                        "Squeeze lat at top",
                        "Lower with control",
                        "Torso stays parallel to ground"
                    ],
                    cues: "Pull to hip ‚Ä¢ Elbow back ‚Ä¢ Squeeze lat ‚Ä¢ Torso still"
                },
                latPulldown: {
                    name: "Lat Pulldown",
                    category: "Back",
                    sets: "3√ó12",
                    rest: "75 sec",
                    steps: [
                        "Grip bar wider than shoulders",
                        "Sit with thighs under pads",
                        "Pull bar to upper chest",
                        "Lead with elbows down and back",
                        "Squeeze lats hard",
                        "Let bar pull arms back up with control"
                    ],
                    cues: "Wide grip ‚Ä¢ Pull to chest ‚Ä¢ Elbows down ‚Ä¢ Squeeze"
                }
            }
        };

        // App State
        let state = {
            currentWeek: 1,
            currentDay: 1,
            customWorkouts: {
                1: [], // Monday
                5: [], // Friday
                6: [], // Saturday
                0: []  // Sunday
            },
            completedWorkouts: [],
            progressLogs: [],
            baselineSpeed: 0,
            currentSpeed: 0
        };

        // Default workouts
        const defaultWorkouts = {
            1: ['trapBar', 'singleLegRDL', 'boxJumps', 'pallof', 'medBall', 'facePulls'],
            5: ['trapBar', 'singleLegRDL', 'boxJumps', 'pallof', 'medBall', 'facePulls'],
            6: [],
            0: ['mcgillCurlUp', 'sidePlank', 'birdDog']
        };

        // Initialize
        function init() {
            loadState();
            
            // Set default workouts if custom workouts are empty
            if (state.customWorkouts[1].length === 0) {
                state.customWorkouts = {...defaultWorkouts};
                saveState();
            }
            
            generateWeekSelector();
            loadDay(state.currentDay);
            updateStats();
            loadHistory();
        }

        // Load state
        function loadState() {
            const saved = localStorage.getItem('golfSpeedV3');
            if (saved) {
                const loaded = JSON.parse(saved);
                state = {...state, ...loaded};
            }
        }

        // Save state
        function saveState() {
            localStorage.setItem('golfSpeedV3', JSON.stringify(state));
        }

        // Week selector
        function generateWeekSelector() {
            const container = document.getElementById('weekSelector');
            let html = '';
            for (let i = 0; i <= 8; i++) {
                const active = i === state.currentWeek ? 'active' : '';
                const completed = i < state.currentWeek ? 'completed' : '';
                html += `
                    <button class="week-btn ${active} ${completed}" onclick="selectWeek(${i})">
                        ${i === 0 ? 'üìã' : i}
                        ${i === 0 ? '<span>Test</span>' : '<span>WK</span>'}
                    </button>
                `;
            }
            container.innerHTML = html;
        }

        // Select week
        function selectWeek(week) {
            state.currentWeek = week;
            saveState();
            generateWeekSelector();
            updateStats();
            
            if (week === 0) {
                showBaselineTesting();
            }
        }

        // Show baseline testing
        function showBaselineTesting() {
            const container = document.getElementById('exercisesList');
            container.innerHTML = `
                <div class="exercise-card">
                    <div style="padding: 10px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px; font-size: 18px;">üìã Week 0: Baseline Testing</h3>
                        <p style="margin-bottom: 20px; color: var(--text-secondary);">Complete these tests BEFORE starting Week 1</p>
                        
                        <div style="background: var(--bg); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                            <h4 style="color: var(--primary); margin-bottom: 10px;">1. Speed Baseline (Range)</h4>
                            <ul style="margin-left: 20px; color: var(--text-secondary); line-height: 1.8;">
                                <li>Hit 10 drivers at comfortable speed</li>
                                <li>Measure ALL swings with radar</li>
                                <li>Record average speed in Progress tab</li>
                            </ul>
                        </div>

                        <div style="background: var(--bg); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                            <h4 style="color: var(--primary); margin-bottom: 10px;">2. Distance Baseline (Range)</h4>
                            <ul style="margin-left: 20px; color: var(--text-secondary); line-height: 1.8;">
                                <li>Same 10 swings as above</li>
                                <li>Record carry distance</li>
                                <li>Note average in Progress tab</li>
                            </ul>
                        </div>

                        <div style="background: var(--bg); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                            <h4 style="color: var(--primary); margin-bottom: 10px;">3. Strength Baseline (Gym)</h4>
                            <ul style="margin-left: 20px; color: var(--text-secondary); line-height: 1.8;">
                                <li>Find trap bar deadlift 5RM (5-rep max)</li>
                                <li>Hire trainer for 1 session if needed</li>
                                <li>Record weight in Progress tab</li>
                            </ul>
                        </div>

                        <div style="background: var(--bg); padding: 15px; border-radius: 12px;">
                            <h4 style="color: var(--primary); margin-bottom: 10px;">4. Ready to Start?</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 10px;">Once baseline tests complete:</p>
                            <ul style="margin-left: 20px; color: var(--text-secondary); line-height: 1.8;">
                                <li>Go to Progress tab</li>
                                <li>Enter all baseline numbers</li>
                                <li>Click Week 1 above</li>
                                <li>Start training!</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        // Load day
        function loadDay(day) {
            state.currentDay = day;
            
            // Update tab active states
            const dayTabs = document.querySelectorAll('.day-tab');
            dayTabs.forEach(tab => tab.classList.remove('active'));
            if (day === 1) dayTabs[0]?.classList.add('active');
            else if (day === 5) dayTabs[1]?.classList.add('active');
            else if (day === 6) dayTabs[2]?.classList.add('active');
            else if (day === 0) dayTabs[3]?.classList.add('active');

            // Update title
            const titles = {
                1: 'Monday Legs',
                5: 'Friday Legs',
                6: 'Saturday Upper',
                0: 'Sunday Upper'
            };
            document.getElementById('workoutTitle').textContent = titles[day];
            document.getElementById('workoutTime').textContent = '50 min';

            renderExercises();
        }

        // Render exercises
        function renderExercises() {
            const container = document.getElementById('exercisesList');
            const exercises = state.customWorkouts[state.currentDay] || [];
            
            let html = '';
            exercises.forEach((exKey, index) => {
                const ex = getExercise(exKey);
                if (ex) {
                    html += createExerciseCard(ex, index + 1, exKey);
                }
            });
            
            container.innerHTML = html;
        }

        // Get exercise from library
        function getExercise(key) {
            for (let category in exerciseLibrary) {
                if (exerciseLibrary[category][key]) {
                    return exerciseLibrary[category][key];
                }
            }
            return null;
        }

        // Create exercise card
        function createExerciseCard(ex, num, key) {
            return `
                <div class="exercise-card" id="card-${key}-${num}">
                    <div class="remove-exercise" onclick="removeExercise('${key}')">√ó</div>
                    <div class="exercise-header">
                        <div class="exercise-number">${num}</div>
                        <div class="exercise-info">
                            <div class="exercise-name">${ex.name}</div>
                            <div class="exercise-sets">${ex.sets} ‚Ä¢ ${ex.rest}</div>
                        </div>
                        <div class="expand-btn" onclick="toggleExercise('${key}-${num}')">
                            <span id="icon-${key}-${num}">‚ñº</span>
                        </div>
                    </div>
                    
                    <div class="exercise-details" id="details-${key}-${num}">
                        <div class="steps-list">
                            ${ex.steps.map((step, i) => `
                                <div class="step">
                                    <div class="step-num">${i + 1}</div>
                                    <div>${step}</div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="cues-box">
                            <div class="cues-title">‚úì Key Points</div>
                            <div class="cues-list">${ex.cues}</div>
                        </div>

                        <div class="action-btns">
                            <button class="btn btn-success" onclick="markComplete('${key}-${num}')">
                                ‚úì Done
                            </button>
                            <button class="btn btn-secondary" onclick="toggleExercise('${key}-${num}')">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Toggle exercise
        function toggleExercise(id) {
            const details = document.getElementById(`details-${id}`);
            const icon = document.getElementById(`icon-${id}`);
            
            if (details.classList.contains('show')) {
                details.classList.remove('show');
                icon.textContent = '‚ñº';
            } else {
                details.classList.add('show');
                icon.textContent = '‚ñ≤';
                details.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        // Mark complete
        function markComplete(id) {
            const card = document.getElementById(`card-${id}`);
            if (card) {
                card.classList.add('completed');
                toggleExercise(id);
                showToast('üí™ Great work!');
                
                // Check if all done
                setTimeout(checkAllComplete, 500);
            }
        }

        // Check if all exercises complete
        function checkAllComplete() {
            const allCards = document.querySelectorAll('.exercise-card');
            const completedCards = document.querySelectorAll('.exercise-card.completed');
            
            if (allCards.length > 0 && allCards.length === completedCards.length) {
                completeWorkout();
            }
        }

        // Complete workout
        function completeWorkout() {
            const today = new Date().toISOString().split('T')[0];
            const alreadyLogged = state.completedWorkouts.some(w => 
                w.date === today && w.day === state.currentDay
            );
            
            if (alreadyLogged) return;
            
            state.completedWorkouts.push({
                date: today,
                week: state.currentWeek,
                day: state.currentDay
            });
            saveState();
            updateStats();
            showToast('üéâ Workout logged!');
        }

        // Remove exercise
        function removeExercise(key) {
            const dayExercises = state.customWorkouts[state.currentDay];
            const index = dayExercises.indexOf(key);
            if (index > -1) {
                dayExercises.splice(index, 1);
                saveState();
                renderExercises();
                showToast('Exercise removed');
            }
        }

        // Open library
        function openLibrary() {
            const modal = document.getElementById('libraryModal');
            const content = document.getElementById('libraryContent');
            
            let html = '';
            
            const categories = {
                legs: 'Legs & Plyometrics',
                core: 'Core & Stability',
                arms: 'Arms & Biceps/Triceps',
                shoulders: 'Shoulders',
                chest: 'Chest',
                back: 'Back'
            };
            
            for (let catKey in categories) {
                html += `
                    <div class="exercise-category">
                        <div class="category-title">${categories[catKey]}</div>
                `;
                
                for (let exKey in exerciseLibrary[catKey]) {
                    const ex = exerciseLibrary[catKey][exKey];
                    html += `
                        <div class="exercise-library-item" onclick="addExercise('${exKey}')">
                            <div class="library-item-name">${ex.name}</div>
                            <div class="library-item-desc">${ex.sets}</div>
                        </div>
                    `;
                }
                
                html += `</div>`;
            }
            
            content.innerHTML = html;
            modal.classList.add('show');
        }

        // Close library
        function closeLibrary() {
            document.getElementById('libraryModal').classList.remove('show');
        }

        // Add exercise
        function addExercise(key) {
            const dayExercises = state.customWorkouts[state.currentDay];
            
            // Check if already added
            if (dayExercises.includes(key)) {
                showToast('‚ö†Ô∏è Already in workout');
                return;
            }
            
            dayExercises.push(key);
            saveState();
            renderExercises();
            closeLibrary();
            showToast('‚úÖ Exercise added!');
        }

        // Update stats
        function updateStats() {
            const thisWeek = state.completedWorkouts.filter(w => w.week === state.currentWeek).length;
            document.getElementById('workoutsThisWeek').textContent = thisWeek;
            
            const gain = state.currentSpeed - state.baselineSpeed;
            document.getElementById('speedGain').textContent = gain > 0 ? '+' + gain.toFixed(1) : '0.0';
        }

        // Save progress
        function saveProgress() {
            const speed = parseFloat(document.getElementById('speedInput').value);
            const distance = parseFloat(document.getElementById('distanceInput').value);
            const deadlift = parseFloat(document.getElementById('deadliftInput').value);

            if (!speed && !distance && !deadlift) {
                showToast('‚ö†Ô∏è Enter at least one value');
                return;
            }

            const entry = {
                date: new Date().toISOString().split('T')[0],
                week: state.currentWeek,
                speed: speed || state.currentSpeed,
                distance: distance || 0,
                deadlift: deadlift || 0
            };

            state.progressLogs.push(entry);
            
            if (speed) {
                state.currentSpeed = speed;
                if (state.baselineSpeed === 0) state.baselineSpeed = speed;
            }

            saveState();
            updateStats();
            loadHistory();
            showToast('‚úÖ Progress saved!');
            
            document.getElementById('speedInput').value = '';
            document.getElementById('distanceInput').value = '';
            document.getElementById('deadliftInput').value = '';
        }

        // Load history
        function loadHistory() {
            const container = document.getElementById('historyList');
            
            if (state.progressLogs.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üìä</div>
                        <div class="empty-text">No progress logged yet</div>
                    </div>
                `;
                return;
            }

            const sorted = [...state.progressLogs].reverse();
            let html = '';

            sorted.forEach(log => {
                const speedGain = state.baselineSpeed > 0 ? (log.speed - state.baselineSpeed).toFixed(1) : 0;
                
                html += `
                    <div class="history-card">
                        <div class="history-date">${log.date} ‚Ä¢ Week ${log.week}</div>
                        <div class="history-stats">
                            ${log.speed ? `
                                <div class="history-stat">
                                    <div class="history-stat-label">Speed</div>
                                    <div class="history-stat-value">
                                        ${log.speed} mph
                                        ${speedGain > 0 ? `<span class="gain">+${speedGain}</span>` : ''}
                                    </div>
                                </div>
                            ` : ''}
                            ${log.distance ? `
                                <div class="history-stat">
                                    <div class="history-stat-label">Distance</div>
                                    <div class="history-stat-value">${log.distance} yds</div>
                                </div>
                            ` : ''}
                            ${log.deadlift ? `
                                <div class="history-stat">
                                    <div class="history-stat-label">Deadlift</div>
                                    <div class="history-stat-value">${log.deadlift} lbs</div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // Switch tabs
        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));

            if (tab === 'workout') {
                document.getElementById('workoutTab').classList.add('active');
                document.querySelectorAll('.nav-item')[0].classList.add('active');
            } else {
                document.getElementById('progressTab').classList.add('active');
                document.querySelectorAll('.nav-item')[1].classList.add('active');
            }
        }

        // Timer functions
        let timerInterval = null;
        let timeLeft = 0;

        function startTimer(seconds) {
            stopTimer();
            timeLeft = seconds;
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    stopTimer();
                    showToast('‚è±Ô∏è Rest complete!');
                    playBeep();
                }
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            timeLeft = 0;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function playBeep() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        // Toast notification
        function showToast(message) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 80px;
                left: 50%;
                transform: translateX(-50%);
                background: var(--card-bg);
                color: var(--text);
                padding: 16px 24px;
                border-radius: 12px;
                box-shadow: 0 8px 32px rgba(0,0,0,0.4);
                z-index: 10000;
                animation: slideIn 0.3s;
                border: 1px solid var(--border);
                font-weight: 600;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s';
                setTimeout(() => toast.remove(), 300);
            }, 2000);
        }

        // Init on load
        window.onload = init;
    </script>
</body>
</html>
